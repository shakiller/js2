<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        td {
            border: solid 1px red;
        }

        .green {
            background: green;
            color: white;
        }

    </style>
    <script>
        function swithColor(colorText) {
            var arrColor = colorText.match(/[0-9a-f]{2}/gi);
            arrHsl=[];
            console.log(arrColor);
            arrColor[0]='0x'+arrColor[0];
            arrColor[1]='0x'+arrColor[1];
            arrColor[2]='0x'+arrColor[2];
            arrColor[0]=parseInt(arrColor[0],16);
            arrColor[1]=parseInt(arrColor[1],16);
            arrColor[2]=parseInt(arrColor[2],16);
            rgbToHsl(arrColor[0],arrColor[1],arrColor[2]);
            
            
            
            
//            function rgbToHsl(r, g, b) {
//                debugger;
//                console.log('rgb '+r+' '+ g+' ' + b);
//                var max = Math.max(r, g, b);
//                console.log('max' +max);
//                var min = Math.min(r, g, b);
//                console.log('min'+min);
//                var h = (max + min) / 2;
//                var s = (max + min) / 2;
//                var l = (max + min) / 2;
//                var arrHsl=[];
//                console.log(h+' '+s+' '+l);
//                if (max == min) {
//                    h = s = 0; // achromatic
//                } else {
//                    var d = max - min;
//                    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
//                    switch (max) {
//                        case r:
//                            h = (g - b) / d + (g < b ? 6 : 0);
//                            break;
//                        case g:
//                            h = (b - r) / d + 2;
//                            break;
//                        case b:
//                            h = (r - g) / d + 4;
//                            break;
//                    }
//                    h /= 6;
//                }
//                
//                arrHsl[0]=h;
//                arrHsl[1]=s;
//                arrHsl[2]=l;
//                console.log(arrHsl);
//                return arrHsl;
//            }
            function rgbToHsl(r, g, b) {
	var
	min = Math.min(r, g, b),
	max = Math.max(r, g, b),
	diff = max - min, 
    
	h = 0, s = 0, l = (min + max) / 2;

	if (diff != 0) {
		s = l < 0.5 ? diff / (max + min) : diff / (2 - max - min);

		h = (r == max ? (g - b) / diff : g == max ? 2 + (b - r) / diff : 4 + (r - g) / diff) * 60;
	}

	            arrHsl[0]=h;
                arrHsl[1]=s;
                arrHsl[2]=l;
                console.log(arrHsl);
                return arrHsl;
}
            
            
            
            
            
            
            
            
            bkgColor = 'hsl('+arrHsl[0]+','+arrHsl[1]+'%,'+arrHsl[2]+'%'+')';
            console.log(bkgColor);
            return bkgColor;
        }

    </script>
</head>

<body>
    <input type="number" name="x">
    <input type="number" name="y">
    <input type="color" name="color" value="#f223aa">
    <p onclick="createTable()">go</p>
    <script>
        function createTable() {
            bkgColor1 = swithColor(userColor);
            var tabX = document.querySelector('input[name="x"]').value;
            var tabY = document.querySelector('input[name="y"]').value;
            var userColor=document.querySelector('input[name="color"]').value;
            var bkgColor;
        
            var i = 0,
                rowEl = null,
                tableEl = document.createElement("table");
            for (i = 1; i <= tabX; i++) {
                rowEl = tableEl.insertRow();

                for (j = 1; j <= tabY; j++) {


                    celEl = rowEl.insertCell();
                    celEl.textContent = i * j;
                    if ((j == 1) || (i == 1)) {
                        celEl.style.color = userColor;
                        celEl.style.backgroundColor = bkgColor1;
                    }
                    celEl.setAttribute(onclick, "setcolor(green)")

                }
            }
            document.body.appendChild(tableEl);
        }

    </script>

</body>

</html>
